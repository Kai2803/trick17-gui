<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML5 Frontend</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="m-5 bg-slate-800">
<div class="w-[800px] m-auto shadow-xl bg-white">
    <canvas id="canvas" width="800" height="600"></canvas>
</div>
<script type="module">
    let canvas = document.getElementById("canvas");
    let ctx = canvas.getContext("2d");

    let socket = new WebSocket('ws://localhost:8080/ws/');
    socket.addEventListener('message', event => {
        let cmd = event.data.substring(0, 8);
        let args = event.data.substring(9);
        switch (cmd) {
            case 'setColor':
                ctx.fillStyle = 'rgb(' + args + ')';
                ctx.strokeStyle = 'rgb(' + args + ')';
                break;
            case 'drawRect':
                ctx.strokeRect(...args.split(','));
                break;
            case 'fillRect':
                ctx.fillRect(...args.split(','));
                break;
            default:
                console.log('Unknown command: ' + event.data);
        }
    });
</script>
</body>
</html>
